# Matcha

> A caffeine driven, simple approach to benchmarking.

Matcha allow you to design experiments that will measure the performance of your code. It is recommended that each
bench focus on a specific point of impact in your application.

![Matcha Report](http://f.cl.ly/items/3X0a1m0S250t2A0W3n1r/matcha-benchmark.png)

## Installation

Matcha is available on npm.

      $ npm install matcha

## Writing Async Benchmarks

Though suites/benches are executed serially, the benches themselves can be asyncronous. Furthermore, suites ran with
the matcha command line runner have a number of globals to simplify bench definitions. Take the following code, for example:

```js
suite('Make Tea', function () {
  var tea = new CupOfTea('green');

  bench('boil water', function(next) {
    tea.boil('85â„ƒ', function (err, h20) {
      // perfect temperature!
      next();
    });
  });

  // add tea, pour, ...  

  bench('sip tea', function() {
    tea.sip('mmmm');
  });
});
```
#### Async vs. Sync

Since boiling water takes time, a `next` function was provided to each iteration in our bench to be called when the
async function completes. Since the consumption of tea provides instant gratification, no `next` needed to be provided, even though
we still wish to measure it.

#### Setup/Teardown

Arbitray functions may be specified for setup or teardown for each suite by using the `before` and `after` keywords.
These function may be sync or async.

```js
suite('DB', function() {
  before(function(next) {
    db.connect('localhost:9090', next);
  });

  bench(function(next) {
    // ...
  });

  after(function() {
    db.close();
  });
});
```

#### Setting Options

As not all code is equal, we need a way to change the running conditions for our benches. Options can currently be changed for
any given suite, and will be retained for any nested suites or benches of that suite. 

To set an option:

```js
suite('Make Tea', function () {
  set('iterations', 10000);
  set('type', 'static');
  // ...
```
##### Defaults

Here are all ava