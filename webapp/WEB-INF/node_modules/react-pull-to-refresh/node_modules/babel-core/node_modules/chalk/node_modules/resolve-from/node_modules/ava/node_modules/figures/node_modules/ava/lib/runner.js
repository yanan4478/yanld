'use strict';
var inherits = require('util').inherits;
var EventEmitter = require('events').EventEmitter;
var eachAsync = require('each-async');
var Test = require('./test');

inherits(Runner, EventEmitter);

function Runner(opts) {
	this._tests = [];
	this._results = [];
	this._firstError = null;
	this._failCount = 0;
}

Runner.prototype.addTest = function (title, cb) {
	this._tests.push(new Test(title, cb));
};

Runner.prototype.run = function (cb) {
	var self = this;

	eachAsync(this._tests, function (te