import { normalize, Schema, arrayOf } from 'normalizr';
var Immutable = require('immutable');

const album = new Schema('album');
const albumDetail = new Schema('albumDetail');
//const collection = new Schema('collections');

album.define({
    list: arrayOf(albumDetail),
    //collections: arrayOf(collection)
});


var data={"code":0,"msg":"success","count":10,"list":[{"id":"53160","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-17 12:40:20","agent_id":"13","type":"1","category":"0","cnt":0,"list":[]},{"id":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-17 12:40:20","agent_id":"13","type":"1","category":"0","cnt":0,"list":[{"id":"121451","upaipath":"\/albumdata\/f3761b246e1cbfaf2b23c8c8383a2e05.jpg","type":"IMAGE","localpath":"","height":"640","width":"475","del_flag":"0","imgsrc":"DkCJ76PT0eL4ri0DPHQ4cx4s5DDVmOc9vm_S3FLV8fISfIj_gAgNBUlWGM1xojTy","createtime":"2015-11-17 12:40:40","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735239","extparam":null,"extblob":null},{"id":"121452","upaipath":"\/albumdata\/5045d2708bd496bf7410c44a0bdb1872.jpg","type":"IMAGE","localpath":"","height":"640","width":"475","del_flag":"0","imgsrc":"zgskI8AdYIWRxuewBs5W9E0Ll1iLqFxkOF6HB4PCL9SxMXKE2oKA90RNhKA0DLjT","createtime":"2015-11-17 12:40:41","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735240","extparam":null,"extblob":null},{"id":"121453","upaipath":"\/albumdata\/fa2806367b2537d04e478fea01d0030b.jpg","type":"IMAGE","localpath":"","height":"640","width":"475","del_flag":"0","imgsrc":"6B9UwTIZexfTlETiYD6_RZmtd8zh6npOnzH0ecjGW8zGbP-BBrXUOpwvEdl2QBJF","createtime":"2015-11-17 12:40:43","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735241","extparam":null,"extblob":null},{"id":"121454","upaipath":"\/albumdata\/a3ebc6aa11fba64ad5afca447d57b8fb.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"eZEtmGEGKPehXQabAzWG0yeZNUqtQ6HLDmrL5gtRy2tIoQ-gDu8OwUEDsORUAN0L","createtime":"2015-11-17 12:40:44","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735242","extparam":null,"extblob":null},{"id":"121455","upaipath":"\/albumdata\/c03af51da173c66c6e64ef261107c576.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"REkHrcIkl6VSxzbR4rEaU-zgMX9SjD27ds9kXGiAuhR-FUxO7U7OH2tRMlAICFhW","createtime":"2015-11-17 12:40:45","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735243","extparam":null,"extblob":null},{"id":"121456","upaipath":"\/albumdata\/d92a1b38e1df99b9457a95fa94b53e35.jpg","type":"IMAGE","localpath":"","height":"640","width":"475","del_flag":"0","imgsrc":"aPSrQrUZvzyrXRi15Kx3J9OASZVIRTJUx-x5tfxlVxTIawwjkgtKzYXqMOnaNQs3","createtime":"2015-11-17 12:40:47","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735244","extparam":null,"extblob":null},{"id":"121457","upaipath":"\/albumdata\/9bca60057c550c73f57f9f5a099743c1.jpg","type":"IMAGE","localpath":"","height":"640","width":"475","del_flag":"0","imgsrc":"ZEm_wdWjjtQp6vzSmHCTlBBhe-4ZaEBSj0qIzAX9RTMvGH1OxLwViofzQKisxTIp","createtime":"2015-11-17 12:40:48","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735245","extparam":null,"extblob":null},{"id":"121458","upaipath":"\/albumdata\/76a9e1ab56e16a3829e86dc27534ed46.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"fPDYJ3HVDZ9hAblGSYV2d9sUKr7bzeVWZc6TNsOoU6nYjb8dZ6ueyNtf_67IjTLW","createtime":"2015-11-17 12:40:49","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735246","extparam":null,"extblob":null},{"id":"121459","upaipath":"\/albumdata\/8b5413ed1d9c640a6924bbe381f78f3e.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"znj1-hOJLCAuhn5KV2IlbmpPbjY1eTsdXTG-w9WIAYeQIixRfcVPldR_luHgpUIE","createtime":"2015-11-17 12:40:51","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735247","extparam":null,"extblob":null},{"id":"121460","upaipath":"\/albumdata\/b2a9017bb8c1af064639668e9883f30c.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"S2m6Wusn7OEQaigS_omqH45ZSIUR9HpPOCqOLn--dxZP3pG5XMgiVb0m7-1smb8A","createtime":"2015-11-17 12:41:05","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735265","extparam":null,"extblob":null},{"id":"121461","upaipath":"\/albumdata\/f93f84550d8ffceaa74d6255175188f1.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"gMLtYLunr3PEJzd9z9CEqBR6_c5lbPxkTbyf2mDxzr7XUkYIn2HiY3Or-z-pVeqs","createtime":"2015-11-17 12:41:07","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735266","extparam":null,"extblob":null},{"id":"121462","upaipath":"\/albumdata\/160127aee29f7ee684f4374218b3e359.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"cgBWn1iI8WHdOauxL5fGQXfMN34RGVBvwkxnI2hAH-_NijQaVmxtXOIW82PF5UYi","createtime":"2015-11-17 12:41:08","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735267","extparam":null,"extblob":null},{"id":"121463","upaipath":"\/albumdata\/34722bb00473d3238e8ea89cbe5e8912.jpg","type":"IMAGE","localpath":"","height":"640","width":"360","del_flag":"0","imgsrc":"tFl2s1nu_ASuMHea_7inq_5mCKDnNG_yw1VjqqIHz8GSe_8LV_b01yrxfnnHtPC-","createtime":"2015-11-17 12:41:09","status":"0","dataid":"53159","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1447735268","extparam":null,"extblob":null}]},{"id":"53158","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-17 12:40:05","agent_id":"-1","type":"1","category":"0","cnt":0,"list":[]},{"id":"52956","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-16 20:03:19","agent_id":"-1","type":"1","category":"1","cnt":0,"list":[]},{"id":"50586","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-13 13:30:12","agent_id":"-1","type":"1","category":"0","cnt":0,"list":[]},{"id":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-13 13:29:44","agent_id":"-1","type":"1","category":"0","cnt":0,"list":[{"id":"112270","upaipath":"\/2015\/11\/13\/upload_db385fb11feb5a503f27eaa6804c7852.jpg","type":"IMAGE","localpath":"","height":"768","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:55:53","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"0","extparam":"0","extblob":null},{"id":"112272","upaipath":"\/2015\/11\/13\/upload_ae5595279e2c42cb1c104e1c549956c0.jpg","type":"IMAGE","localpath":"","height":"768","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:10","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"1","extparam":"1","extblob":null},{"id":"112273","upaipath":"\/2015\/11\/13\/upload_533c0ceecdc206d8b07b8493498de254.jpg","type":"IMAGE","localpath":"","height":"640","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:20","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"2","extparam":"2","extblob":null},{"id":"112274","upaipath":"\/2015\/11\/13\/upload_8ff28805b694b6924160480869eb133c.jpg","type":"IMAGE","localpath":"","height":"413","width":"295","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:24","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"3","extparam":"3","extblob":null},{"id":"112275","upaipath":"\/2015\/11\/13\/upload_2da93e0d4880f0c611ceae6e65f0de10.jpg","type":"IMAGE","localpath":"","height":"720","width":"960","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:27","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"4","extparam":"4","extblob":null},{"id":"112276","upaipath":"\/2015\/11\/13\/upload_8ff28805b694b6924160480869eb133c.jpg","type":"IMAGE","localpath":"","height":"413","width":"295","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:31","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"5","extparam":"5","extblob":null},{"id":"112278","upaipath":"\/2015\/11\/13\/upload_8ff28805b694b6924160480869eb133c.jpg","type":"IMAGE","localpath":"","height":"413","width":"295","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:34","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"6","extparam":"6","extblob":null},{"id":"112279","upaipath":"\/2015\/11\/13\/upload_db385fb11feb5a503f27eaa6804c7852.jpg","type":"IMAGE","localpath":"","height":"768","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:37","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"7","extparam":"7","extblob":null},{"id":"112280","upaipath":"\/2015\/11\/13\/upload_016b866e1653fb2bb7051fa5ed94aa39.jpg","type":"IMAGE","localpath":"","height":"683","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:40","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"8","extparam":"8","extblob":null},{"id":"112281","upaipath":"\/2015\/11\/13\/upload_bee2b8c37173deb8386bb53677e1198d.jpg","type":"IMAGE","localpath":"","height":"768","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:43","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"9","extparam":"9","extblob":null},{"id":"112282","upaipath":"\/2015\/11\/13\/upload_c6cebc98fe8413ab8a909969280055b7.jpg","type":"IMAGE","localpath":"","height":"1200","width":"1600","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:46","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"10","extparam":"10","extblob":null},{"id":"112283","upaipath":"\/2015\/11\/13\/upload_8ff28805b694b6924160480869eb133c.jpg","type":"IMAGE","localpath":"","height":"413","width":"295","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:48","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"11","extparam":"11","extblob":null},{"id":"112284","upaipath":"\/2015\/11\/13\/upload_016b866e1653fb2bb7051fa5ed94aa39.jpg","type":"IMAGE","localpath":"","height":"683","width":"1024","del_flag":"0","imgsrc":"","createtime":"2015-11-13 14:56:51","status":"0","dataid":"50585","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","listorder":"12","extparam":"12","extblob":null}]},{"id":"50583","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-13 13:29:08","agent_id":"-1","type":"1","category":"1","cnt":0,"list":[]},{"id":"50579","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-13 13:26:30","agent_id":"-1","type":"1","category":"1","cnt":0,"list":[]},{"id":"50576","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-13 13:22:13","agent_id":"-1","type":"1","category":"0","cnt":0,"list":[]},{"id":"48917","wxopenid":"od-5Ut75Nw6AJmiAIS8UnT-A6jDg","status":"0","createtime":"2015-11-12 16:42:07","agent_id":"-1","type":"1","category":"0","cnt":0,"list":[]}]}


data = {"code":0,"msg":"success","count":10,"list":[{"id":"53160",list:[{id:"ee","url":"DFDD"},{"id":"d","url":"2"}]},{"id":"123",list:[]}]}

var res = normalize(data.list,arrayOf(album))
var posts = Immutable.fromJS(res);
//console.log(posts)
//console.log(posts.get("entities").get("album"))

var da = posts.get("entities").get("album");

//console.log(da)

/*da = da.update("123",(item)=>{
    //return item.set("url","dd")
    console.log(item)
    return item.set("list",item.get("list").push(1))
})*/

data = {"code":0,"msg":"success","count":10,"list":[{"id":"53160"},{"id":"d","url":"2"},{"id":"123"}]}

res = normalize(data.list,arrayOf(albumDetail))
console.log(res)
posts = Immutable.fromJS(res);

var da = posts.get("entities").get("albumDetail");

//da = da.push({"id":"1"})

da = da.update("53160",(item)=>{
    console.log(item)
})

console.log(da)

